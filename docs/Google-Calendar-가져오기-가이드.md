# Google Calendar에서 업무 가져오기 가이드

## 문제 상황

앱의 업무 데이터가 사라졌지만 Google Calendar에는 여전히 이벤트가 있는 경우, Google Calendar에서 이벤트를 가져와서 앱의 업무로 복구할 수 있습니다.

---

## 해결 방법

### 1. 설정 페이지로 이동

1. 앱에서 **설정** (⚙️) 메뉴 클릭
2. **"📅 Google Calendar 연동"** 섹션 확인

### 2. Google Calendar 연동 확인

- **"Google Calendar 연동이 완료되었습니다."** 메시지가 보여야 합니다
- 연동이 안 되어 있다면 **"Google 계정으로 연동"** 버튼 클릭

### 3. Google Calendar에서 가져오기

1. **"Google Calendar에서 가져오기"** 버튼 클릭
2. 확인 메시지에서 **"확인"** 클릭
3. 가져오기 완료 메시지 확인

---

## 가져오기 규칙

### 가져오는 이벤트

- **`[업무]`로 시작하는 이벤트만 가져옵니다**
  - 예: `[업무] 도수치료 2회차` ✅
  - 예: `AM 10시 [업무] 도수치료` ✅
  - 예: `Flight to Seo` ❌ (가져오지 않음)

### 검색 범위

- **Tasks 캘린더** (앱에서 생성한 이벤트)
- **Primary 캘린더** (기본 캘린더)

### 중복 방지

- 이미 앱에 있는 업무(`calendarEventId`가 있는 업무)는 가져오지 않습니다
- 같은 이벤트를 여러 번 가져와도 중복으로 생성되지 않습니다

---

## 예시

### Google Calendar에 있는 이벤트

```
1월 30일 (금) AM 10:00
[업무] 도수치료 2회차
```

### 가져오기 후

앱의 업무 목록에 다음이 추가됩니다:

```
제목: 도수치료 2회차
마감일: 2026-01-30 10:00
상태: 할 일
우선순위: 중간
```

---

## 주의사항

### 1. 이벤트 제목 형식

Google Calendar에서 앱으로 가져오려면 이벤트 제목이 **`[업무]`로 시작**해야 합니다.

**올바른 형식:**
- `[업무] 도수치료 2회차`
- `[업무] 회의 준비`
- `AM 10시 [업무] 도수치료`

**가져오지 않는 형식:**
- `도수치료 2회차` (앞에 `[업무]` 없음)
- `Flight to Seo` (일반 이벤트)

### 2. 시작 시간 필요

- **시작 시간이 있는 이벤트**만 가져옵니다
- 종일 이벤트인 경우 기본 9시로 설정됩니다

### 3. Tasks 캘린더 표시

Google Calendar에서 **"Tasks" 캘린더**가 체크되어 있지 않으면 이벤트가 보이지 않을 수 있습니다.

**해결:**
1. Google Calendar 왼쪽 사이드바에서 **"Tasks"** 체크박스 클릭
2. 이벤트가 보이는지 확인

---

## 문제 해결

### "가져올 이벤트가 없습니다"

**원인:**
- Google Calendar에 `[업무]`로 시작하는 이벤트가 없음
- 이미 모든 이벤트를 가져옴

**해결:**
1. Google Calendar에서 이벤트 제목 확인
2. `[업무]`로 시작하는지 확인
3. 필요시 이벤트 제목 수정

### "연동이 안 되어 있습니다"

**원인:**
- Google Calendar 연동이 완료되지 않음

**해결:**
1. 설정 페이지에서 **"Google 계정으로 연동"** 클릭
2. Google 계정 로그인 및 권한 승인
3. 연동 완료 후 다시 시도

### "가져오기 실패"

**원인:**
- 네트워크 오류
- Google Calendar API 오류

**해결:**
1. 잠시 후 다시 시도
2. Vercel Functions → Logs에서 오류 확인
3. Google Calendar 연동 상태 확인

---

## 양방향 동기화

이제 **양방향 동기화**가 가능합니다:

### 앱 → Google Calendar
- 앱에서 업무 생성/수정/삭제 시 자동으로 Google Calendar에 반영
- Tasks 캘린더에 저장됨

### Google Calendar → 앱
- **"Google Calendar에서 가져오기"** 버튼으로 수동 가져오기
- `[업무]`로 시작하는 이벤트만 가져옴

---

## 참고

- 가져온 업무는 앱에서 수정/삭제 가능
- 앱에서 수정하면 Google Calendar에도 자동 반영
- Google Calendar에서 수정한 경우, 다시 가져오기 필요 (자동 동기화는 앱 → Calendar만 지원)
